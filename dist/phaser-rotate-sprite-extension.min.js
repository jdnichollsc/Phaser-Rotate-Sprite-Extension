!function(t){"use strict";t.Extension=t.Extension||{},t.Extension.RotateSprite=function(e,o,a,r,n,i){t.Sprite.call(this,e,o,a,r,n);var p=this;return p.anchor.set(.5),p.inputEnabled=!0,p.input.useHandCursor=!0,p.input.enableDrag(),e.add.existing(p),p.rotate=e.add.sprite(o,a,i||"rotate"),p.rotate.anchor.set(.5),p.rotate.inputEnabled=!0,p.rotate.input.useHandCursor=!0,p.rotate.input.priorityID=1,p.rotate.input.enableDrag(),p.rotate.events.onDragStart.add(p.onDragStart,p),p.rotate.events.onDragStop.add(p.onDragStop,p),p.rotate.events.onDragUpdate.add(p.onRotateDragUpdate,p),p.rotate.events.onInputOver.add(function(){this.game.canvas.style.cursor="crosshair"},p),this},t.Extension.RotateSprite.prototype=Object.create(t.Sprite.prototype),t.Extension.RotateSprite.prototype.constructor=t.Extension.RotateSprite,t.Extension.RotateSprite.prototype.update=function(){var t=this;if(!t.isDragging){var e=(t.width/2,t.height/2);t.rotate.x=t.x,t.rotate.y=t.y,t.rotate.pivot.y=e+30}},t.Extension.RotateSprite.prototype.onDragStart=function(){this.isDragging=!0},t.Extension.RotateSprite.prototype.onDragStop=function(){this.isDragging=!1},t.Extension.RotateSprite.prototype.onRotateDragUpdate=function(){var e=this;e.rotate.x=e.x,e.rotate.y=e.y,e.rotation=e.game.input.activePointer.position.angle(e.position)-t.Math.degToRad(90),e.rotate.rotation=e.rotation}}(Phaser);